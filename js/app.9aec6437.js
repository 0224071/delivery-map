(function(t){function e(e){for(var o,a,i=e[0],s=e[1],u=e[2],l=0,f=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,a=1;a<n.length;a++){var s=n[a];0!==c[s]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},c={app:0},r=[];function a(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-2d0c9189":"4312ce11","chunk-2d0cf391":"1c4b4848","chunk-2d0da8f3":"f59eb4b6","chunk-2d22523a":"c0744dc4"}[t]+".js"}function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n=c[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=c[t]=[e,o]}));e.push(n[2]=o);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=a(t);var u=new Error;r=function(e){s.onerror=s.onload=null,clearTimeout(l);var n=c[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",u.name="ChunkLoadError",u.type=o,u.request=r,n[1](u)}c[t]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(e)},i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"04f6":function(t,e,n){},1072:function(t,e,n){"use strict";n("61a7")},"164b":function(t,e,n){},"2d8d":function(t,e,n){"use strict";n("04f6")},4520:function(t,e,n){"use strict";n("7ab1")},"4d8d":function(t,e,n){"use strict";n("164b")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),c={class:"d-flex flex-column"};function r(t,e,n,r,a,i){var s=Object(o["w"])("Card-list"),u=Object(o["w"])("Aside"),l=Object(o["w"])("GPS"),d=Object(o["w"])("Map");return Object(o["n"])(),Object(o["d"])(o["a"],null,[Object(o["g"])(u,{title:"外送查價平台"},{default:Object(o["B"])((function(){return[Object(o["g"])(s,{fp_data:t.fp_data,onSetView:i.setView},null,8,["fp_data","onSetView"])]})),_:1}),Object(o["g"])("main",c,[Object(o["g"])(l,{top:"80",right:"12",onSetView:i.setView},null,8,["onSetView"]),Object(o["g"])(d,{class:"map",fp_data:t.fp_data,ref:"map"},null,8,["fp_data"])])],64)}var a=n("5530"),i=n("1da1"),s=(n("d81d"),n("96cf"),n("b0c0"),Object(o["E"])("data-v-ed63deea"));Object(o["q"])("data-v-ed63deea");var u=Object(o["f"])(" 目前位置 "),l={class:"relative"},d={class:"relative"};Object(o["o"])();var f=s((function(t,e,n,c,r,a){var i=Object(o["w"])("l-control-zoom"),f=Object(o["w"])("l-tile-layer"),b=Object(o["w"])("l-tooltip"),p=Object(o["w"])("l-marker"),m=Object(o["w"])("l-icon"),O=Object(o["w"])("l-popup"),j=Object(o["w"])("l-map");return Object(o["n"])(),Object(o["d"])(j,{center:r.nowPos,modelValue:r.zoom,"onUpdate:modelValue":e[2]||(e[2]=function(t){return r.zoom=t}),zoom:r.zoom,"onUpdate:zoom":[e[3]||(e[3]=function(t){return r.zoom=t}),a.zoomUpdate],"zoom-animation":!0,inertia:!0,"inertia-deceleration":3e3,"inertia-max-speed":1/0,"ease-linearity":.15,ref:"map"},{default:s((function(){return[Object(o["g"])(i,{position:"topright"}),Object(o["g"])(f,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",ref:"layer","max-zoom":r.maxZoom},null,8,["max-zoom"]),t.userPos?(Object(o["n"])(),Object(o["d"])(p,{key:0,"lat-lng":t.userPos},{default:s((function(){return[Object(o["g"])(b,null,{default:s((function(){return[u]})),_:1})]})),_:1},8,["lat-lng"])):Object(o["e"])("",!0),t.focusMarker?(Object(o["n"])(),Object(o["d"])(p,{"lat-lng":t.focusMarker.info.location,ref:"marker",key:t.focusMarker.name},{default:s((function(){return[Object(o["g"])(m,null,{default:s((function(){return[Object(o["g"])("div",l,[Object(o["g"])("img",{class:"marker-icon",src:r.FpIconUrl,alt:"",style:a.iconActiveSize},null,12,["src"])])]})),_:1}),Object(o["g"])(O,{ref:"popup",onReady:e[1]||(e[1]=function(e){t.$nextTick((function(){t.$refs.marker.leafletObject.openPopup()}))})},{default:s((function(){return[Object(o["f"])(Object(o["x"])(t.focusMarker.name),1)]})),_:1},512)]})),_:1},8,["lat-lng"])):Object(o["e"])("",!0),(Object(o["n"])(!0),Object(o["d"])(o["a"],null,Object(o["u"])(n.fp_data,(function(t){return Object(o["n"])(),Object(o["d"])(p,{key:t.name,"lat-lng":t.info.location,info:t,onClick:function(e){return a.changeSearch(e,t)}},{default:s((function(){return[Object(o["g"])(m,null,{default:s((function(){return[Object(o["C"])(Object(o["g"])("div",d,[Object(o["C"])(Object(o["g"])("div",{class:"marker-text"},Object(o["x"])(t.name),513),[[o["z"],r.textMinZoom<r.zoom]]),Object(o["g"])("img",{class:"marker-icon",src:r.FpIconUrl,alt:"",style:a.iconSize},null,12,["src"])],512),[[o["z"],r.markerMinZoom<r.zoom]])]})),_:2},1024)]})),_:2},1032,["lat-lng","info","onClick"])})),128))]})),_:1},8,["center","modelValue","zoom","ease-linearity","onUpdate:zoom"])})),b=(n("99af"),n("5afd")),p=(n("6cc5"),n("5502")),m={components:{LMap:b["c"],LIcon:b["b"],LTileLayer:b["f"],LMarker:b["d"],LTooltip:b["g"],LPopup:b["e"],LControlZoom:b["a"]},props:{fp_data:{default:[]}},data:function(){return{zoom:18,maxZoom:19,markerMinZoom:8,textMinZoom:17,iconWidth:25,iconHeight:25,FpIconUrl:n("ccef"),UbIconUrl:"",nowPos:[25.042474,121.513729]}},mounted:function(){this.$nextTick((function(){}))},computed:Object(a["a"])(Object(a["a"])({iconSize:function(){return{width:this.iconWidth+"px",height:this.iconHeight+"px"}},iconActiveSize:function(){return{width:this.iconWidth+10+"px",height:this.iconHeight+10+"px"}},iconUrl:function(){return"https://placekitten.com/".concat(this.iconWidth,"/").concat(this.iconHeight)}},Object(p["e"])("map_module",{userPos:function(t){return t.userPos}})),Object(p["e"])("map_module",{focusMarker:"focusMarker"})),methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(p["b"])("fp_module",{setMarkers:"setMarkersData"})),Object(p["d"])("map_module",{selectInfo:"selectInfo"})),{},{changeSearch:function(t,e){this.selectInfo(e)},setView:function(t){console.log(t),this.$refs.map.leafletObject.setView(t,this.maxZoom)},zoomUpdate:function(t){this.$refs.marker},isNoSelectThis:function(t){return!this.focusMarker||(console.log(t!=this.focusMarker.info.location),t!=this.focusMarker.info.location)}})};n("1072");m.render=f,m.__scopeId="data-v-ed63deea";var O=m,j=Object(o["E"])("data-v-3c87524f");Object(o["q"])("data-v-3c87524f");var g={class:"aside__hedader__title"},h=Object(o["g"])("i",{class:"fa fa-times","aria-hidden":"true"},null,-1),v=Object(o["g"])("i",{class:"fa fa-angle-up","aria-hidden":"true"},null,-1);Object(o["o"])();var _=j((function(t,e,n,c,r,a){return Object(o["n"])(),Object(o["d"])("aside",{class:["aside",{"aside--open":r.isOpen}]},[Object(o["g"])("header",{class:"aside__hedader",style:a.headerShadow},[Object(o["g"])("strong",g,[Object(o["g"])("span",null,Object(o["x"])(n.title),1)]),Object(o["g"])("button",{class:"close aside__hedader__close",onClick:e[1]||(e[1]=function(t){return r.isOpen=!1})},[h])],4),Object(o["g"])("div",{class:"aside__body",ref:"body",onScroll:e[2]||(e[2]=function(){return a.scrollEvent&&a.scrollEvent.apply(a,arguments)})},[Object(o["v"])(t.$slots,"default")],544),Object(o["g"])("div",{class:"aside__switch",onClick:e[3]||(e[3]=function(){return a.toggle&&a.toggle.apply(a,arguments)})},[Object(o["g"])("i",{class:["fa",{"fa-angle-right":!r.isOpen,"fa-angle-left":r.isOpen}],"aria-hidden":"true"},null,2)]),Object(o["C"])(Object(o["g"])("div",{class:"circle-button aside__backbtn",onClick:e[4]||(e[4]=function(){return a.gotoTop&&a.gotoTop.apply(a,arguments)})},[v],512),[[o["z"],r.scrollTop]])],2)})),k={props:{title:{default:"Aside Title"}},data:function(){return{isOpen:!0,scrollTop:0}},computed:{headerShadow:function(){return this.scrollTop?{"box-shadow":"0 1px 5px rgba(0, 0, 0, 0.3)"}:{}}},methods:{toggle:function(){this.isOpen=!this.isOpen},scrollEvent:function(t){this.scrollTop=t.target.scrollTop},gotoTop:function(){this.$refs.body.scrollTop=0}}};n("2d8d");k.render=_,k.__scopeId="data-v-3c87524f";var w=k,y=Object(o["E"])("data-v-468533a8");Object(o["q"])("data-v-468533a8");var x={class:"block__body"},S={class:"block__body__section row"},P={class:"col-12"},M={class:"tracking-wide text-sm font-bold text-gray-400"},z={class:"col-12"},C={class:"text-3xl text-gray-900 mr-2"},U=Object(o["g"])("i",{class:"fa fa-map-marker-alt text-blue-600 text-2xl cursor-pointer","aria-hidden":"true"},null,-1),T={class:"col-12"},V={class:"block__body__section row no-gutters border-t border-gray-300"},I={class:"col-6"},E={class:"col-6"},L=Object(o["g"])("div",{class:"block__body__section row border-t border-gray-300"},null,-1);Object(o["o"])();var $=y((function(t,e,n,c,r,a){var i=Object(o["w"])("sapn");return Object(o["n"])(),Object(o["d"])(o["a"],null,[Object(o["g"])("div",null,[Object(o["C"])(Object(o["g"])("input",{type:"search",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return r.filterString=t}),placeholder:"請輸入餐品、餐廳名稱"},null,512),[[o["y"],r.filterString,void 0,{trim:!0}]])]),(Object(o["n"])(!0),Object(o["d"])(o["a"],null,Object(o["u"])(a.dataFiltered,(function(e){return Object(o["n"])(),Object(o["d"])("div",{class:"block my-2",key:e.name},[Object(o["g"])("div",x,[Object(o["g"])("div",S,[Object(o["g"])("div",P,[Object(o["g"])("span",M,Object(o["x"])(e.info.address),1)]),Object(o["g"])("div",z,[Object(o["g"])("span",C,Object(o["x"])(e.name),1),Object(o["g"])("span",{onClick:function(n){t.selectInfo(e),a.setView(e.info.location)}},[U],8,["onClick"])]),Object(o["g"])("div",T,[Object(o["g"])(i,{class:"text-gray-600"},{default:y((function(){return[Object(o["f"])(Object(o["x"])(e.rating),1)]})),_:2},1024)])]),Object(o["g"])("div",V,[Object(o["g"])("div",I,[Object(o["g"])("a",{class:"btn btn-foodpanda-color w-100 rounded-none",onClick:Object(o["D"])((function(t){return a.gotoUrl(e.shopUrl)}),["prevent"])},"FoodPanda",8,["onClick"])]),Object(o["g"])("div",E,[Object(o["g"])("a",{class:"btn btn-ubereats-color w-100 rounded-none",onClick:Object(o["D"])((function(t){return a.gotoUrl(e.shopUrl)}),["prevent"])},"Uber Eats",8,["onClick"])])]),L])])})),128))],64)})),F=(n("4de4"),n("caad"),n("2532"),{props:{fp_data:{default:[]}},data:function(){return{filterString:""}},computed:Object(a["a"])({dataFiltered:function(){var t=this;return this.fp_data?this.fp_data.filter((function(e){var n=e.name,o=e.menu_list;return!t.filterString||(n.includes(t.filterString)||t.menuFiltered(o,t.filterString))})):[]}},Object(p["e"])("map_module",{focusMarker:"focusMarker"})),watch:{focusMarker:function(t){}},methods:Object(a["a"])({gotoUrl:function(t){window.open(t,"_blank")},menuFiltered:function(t,e){return t.some((function(t){return t.name.includes(e)}))},setView:function(t){this.$emit("set-view",t)}},Object(p["d"])("map_module",{selectInfo:"selectInfo"}))});n("4520");F.render=$,F.__scopeId="data-v-468533a8";var D=F,Z=Object(o["E"])("data-v-719c8bb8");Object(o["q"])("data-v-719c8bb8");var A=Object(o["g"])("i",{class:"fa fa-crosshairs","aria-hidden":"true"},null,-1);Object(o["o"])();var q=Z((function(t,e,n,c,r,a){return Object(o["n"])(),Object(o["d"])("div",{class:"leaflet-control-gps",style:a.postionStyle,onClick:e[1]||(e[1]=function(t){return a.getPos(a.setView)})},[A],4)})),N=(n("a9e3"),n("d3b7"),{props:{top:{default:"auto"},bottom:{default:"auto"},left:{default:"auto"},right:{default:"auto"}},data:function(){return{}},mounted:function(){},computed:{postionStyle:function(){var t=this.top,e=this.bottom,n=this.left,o=this.right;return console.log(t,e,n,o),{top:Number(t)+"px"||!1,bottom:Number(e)+"px"||!1,left:Number(n)+"px"||!1,right:Number(o)+"px"||!1}}},methods:{startGPS:function(){return new Promise((function(t,e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t(e)}),(function(t){e(t)})):e("瀏覽器不支援")}))},getPos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.startGPS().then((function(e){t([e.coords.latitude,e.coords.longitude])})).catch((function(t){console.log(t)}))},setView:function(t){this.$emit("set-view",t),this.$store.commit("map_module/setUserPos",t)}}});n("4d8d");N.render=q,N.__scopeId="data-v-719c8bb8";var R=N,G={name:"App",components:{Map:O,Aside:w,CardList:D,GPS:R},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.setData();case 2:case"end":return e.stop()}}),e)})))()},computed:Object(a["a"])({},Object(p["c"])("fp_module",{fp_data:"infoFiltered"})),methods:Object(a["a"])(Object(a["a"])({},Object(p["b"])("fp_module",{setData:"setShopData"})),{},{setView:function(t){this.$refs.map.setView(t)}})};n("c204");G.render=r;var H=G,W=(n("4989"),n("c1c3"),n("def6"),n("bc3a")),J=n.n(W),B=n("2106"),K=n.n(B),Q=(n("159b"),n("1276"),n("ac1f"),{state:function(){return{info:null}},mutations:{setData:function(t,e){var n=e.data;t.info=n}},actions:{setShopData:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,J.a.get("./static/result.json");case 3:o=e.sent,c=o.data,n("setData",{data:c});case 6:case"end":return e.stop()}}),e)})))()}},getters:{infoFiltered:function(t){if(!t.info)return[];var e=[];return t.info.forEach((function(t){t.info.location&&(t.info.location=t.info.location.split(","),e.push(t))})),e}},namespaced:!0}),X={state:function(){return{focusMarker:null,userPos:null}},mutations:{selectInfo:function(t,e){t.focusMarker=e},setUserPos:function(t,e){t.userPos=e}},namespaced:!0},Y=Object(p["a"])({modules:{fp_module:Q,map_module:X}}),tt=(n("15f5"),Object(o["c"])(H));tt.use(K.a,J.a),tt.use(Y),tt.config.devtools=!0,tt.mount("#app")},"61a7":function(t,e,n){},"7ab1":function(t,e,n){},a154:function(t,e,n){},c1c3:function(t,e,n){},c204:function(t,e,n){"use strict";n("a154")},ccef:function(t,e,n){t.exports=n.p+"img/foodpanda.18e6fd96.png"},def6:function(t,e,n){}});
//# sourceMappingURL=app.9aec6437.js.map